<LoginScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [10, 20, 10, 300]
        spacing: 10
        size_hint: 1, 1

        canvas.before:
            Color:
                rgba: 0.2, 0.8, 0.6, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            text: "Welcome to Tebak Gambar!"
            font_size: '25sp'
            color: 1, 1, 1, 1
            size_hint_y: None
            height: '40dp'
            pos_hint: {"center_x": 0.5}

        TextInput:
            id: username
            hint_text: "Username"
            multiline: False
            size_hint: None, None
            size: dp(200), dp(40)
            pos_hint: {"center_x": 0.5}

        TextInput:
            id: password
            hint_text: "Password"
            password: True
            multiline: False
            size_hint: None, None
            size: dp(200), dp(40)
            pos_hint: {"center_x": 0.5}

        # Show confirm password field only when in sign-up mode
        TextInput:
            id: confirm_password
            hint_text: "Confirm Password"
            password: True
            multiline: False
            size_hint: None, None
            size: dp(200), dp(40)
            pos_hint: {"center_x": 0.5}
            opacity: 1 if root.is_sign_up else 0  # Hide if not in sign-up mode

        Button:
            id: submit_button
            text: "Login"
            font_size: '20sp'
            size_hint: None, None
            size: dp(150), dp(60)
            pos_hint: {"center_x": 0.5}
            background_normal: ''
            background_color: 1, 1, 1, 1
            color: 0.2, 0.8, 0.6, 1
            bold: True
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [90]
            on_release: root.submit()

        Label:
            id: login_error
            text: ""
            color: 1, 0, 0, 1
            font_size: '16sp'
            size_hint_y: None
            height: '30dp'
            pos_hint: {"center_x": 0.5}

        Button:
            id: switch_button
            text: "Don't have an account? Sign up"
            font_size: '16sp'
            size_hint: None, None
            size: dp(250), dp(50)
            pos_hint: {"center_x": 0.5}
            background_normal: ''
            background_color: 1, 1, 1, 1
            color: 0.2, 0.8, 0.6, 1
            on_release: root.toggle_sign_up()

<StartScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [10, 20, 10, 300]
        spacing: 5
        size_hint: 1, 1

        canvas.before:
            Color:
                rgba: 0.2, 0.8, 0.6, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Image:
            source: 'assets/logo.png'
            size_hint: None, None
            size: dp(150), dp(150)
            pos_hint: {"center_x": 0.5}

        Label:
            text: "Tebak Negara"
            font_size: '24sp'
            color: 1, 1, 1, 1
            bold: True
            size_hint_y: None
            height: '30dp'
            pos_hint: {"center_x": 0.5}

        Button:
            text: "Ayo Main"
            font_size: '20sp'
            size_hint: None, None
            size: dp(150), dp(60)
            pos_hint: {"center_x": 0.5}
            background_normal: ''
            background_color: 1, 1, 1, 1
            color: 0.2, 0.8, 0.6, 1
            bold: True
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [90]
            on_release: root.start_game()

<GameWidget>:
    BoxLayout:
        orientation: 'vertical'
        padding: [10, 5, 10, 150]
        spacing: 10
        size_hint: 1, 1

        canvas.before:
            Color:
                rgba: 0.2, 0.8, 0.6, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            text: "Tebak Bendera apakah ini?"
            font_size: '20sp'
            color: 1, 1, 1, 1
            halign: 'center'
            size_hint_y: None
            height: '30dp'

        Label:
            id: score_label
            text: "Your Score: 0"
            font_size: '18sp'
            color: 1, 0.5, 0, 1
            size_hint_y: None
            height: '30dp'

        Label:
            id: timer_label
            text: "Time: 0s"
            font_size: '18sp'
            color: 1, 1, 1, 1
            size_hint_y: None
            height: '30dp'

        Image:
            id: flag_image
            source: root.image_source
            size_hint: None, None
            width: 250
            height: 180
            pos_hint: {"center_x": 0.5}

        Label:
            id: answer_label
            text: ""
            font_size: '16sp'
            color: 1, 1, 1, 1
            halign: 'center'
            size_hint_y: None
            height: '30dp'

        GridLayout:
            cols: 2
            spacing: 5
            size_hint: 0.9, None
            height: '120dp'
            pos_hint: {"center_x": 0.5}

            Button:
                id: choice1
                text: ""
                font_size: '16sp'
                size_hint: None, None
                size: dp(150), dp(60)  # Oval button size
                pos_hint: {"center_x": 0.5}
                background_color: 1, 1, 1, 1  # White button background
                color: 0.2, 0.8, 0.6, 1  # Button text color
                bold: True
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1  # White background
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [90]  # Oval shape
                on_release: root.check_answer(self.text)

            Button:
                id: choice2
                text: ""
                font_size: '16sp'
                size_hint: None, None
                size: dp(150), dp(60)  # Oval button size
                pos_hint: {"center_x": 0.5}
                background_color: 1, 1, 1, 1  # White button background
                color: 0.2, 0.8, 0.6, 1  # Button text color
                bold: True
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1  # White background
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [90]  # Oval shape
                on_release: root.check_answer(self.text)

            Button:
                id: choice3
                text: ""
                font_size: '16sp'
                size_hint: None, None
                size: dp(150), dp(60)  # Oval button size
                pos_hint: {"center_x": 0.5}
                background_color: 1, 1, 1, 1  # White button background
                color: 0.2, 0.8, 0.6, 1  # Button text color
                bold: True
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1  # White background
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [90]  # Oval shape
                on_release: root.check_answer(self.text)

            Button:
                id: choice4
                text: ""
                font_size: '16sp'
                size_hint: None, None
                size: dp(150), dp(60)  # Oval button size
                pos_hint: {"center_x": 0.5}
                background_color: 1, 1, 1, 1  # White button background
                color: 0.2, 0.8, 0.6, 1  # Button text color
                bold: True
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1  # White background
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [90]  # Oval shape
                on_release: root.check_answer(self.text)

        Widget:
            size_hint_y: None
            height: '20dp'  # Add spacing at the bottom

        Button:
            text: "Back"
            size_hint: 0.6, None
            height: '40dp'
            pos_hint: {"center_x": 0.5}
            background_color: 0.9, 0.2, 0.2, 1
            on_release:
                app.root.current = 'start'
                app.root.get_screen('game').score = 0
                app.root.get_screen('game').question_count = 0

<ResultScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [20, 20, 20, 300]
        spacing: 15
        size_hint: 1, 1

        canvas.before:
            Color:
                rgba: 0.2, 0.8, 0.6, 1
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [20]

        Label:
            id: result_label
            text: ""  # Default text, will be updated in Python
            font_size: '22sp'
            color: 1, 1, 1, 1
            bold: True
            size_hint_y: None
            height: '40dp'
            pos_hint: {"center_x": 0.5}

        Label:
            id: final_score_label
            text: "Your Final Score: 0"
            font_size: '20sp'
            color: 0.9, 0.9, 0, 1  # Yellow color for emphasis
            size_hint_y: None
            height: '30dp'
            pos_hint: {"center_x": 0.5}

        Label:
            id: time_label
            text: "Time Taken: 0 seconds"
            font_size: '18sp'
            color: 0.8, 1, 0.8, 1  # Light green for time display
            size_hint_y: None
            height: '30dp'
            pos_hint: {"center_x": 0.5}

        Button:
            text: "Play Again"
            font_size: '16sp'
            size_hint: 0.8, None
            height: '40dp'
            pos_hint: {"center_x": 0.5}
            background_color: 0.3, 0.7, 0.3, 1  # Green background for positive action
            on_release:
                app.root.current = 'game'
                app.root.get_screen('game').score = 0
                app.root.get_screen('game').question_count = 0
                app.root.get_screen('game').load_question()
                app.root.get_screen('game').start_timer()

        Button:
            text: "Back to Main Menu"
            font_size: '16sp'
            size_hint: 0.8, None
            height: '40dp'
            pos_hint: {"center_x": 0.5}
            background_color: 0.2, 0.5, 0.8, 1  # Blue background for 'back'
            on_release:
                app.root.current = 'start'
                app.root.get_screen('game').score = 0
                app.root.get_screen('game').question_count = 0

        Button:
            text: "Exit"
            font_size: '16sp'
            size_hint: 0.8, None
            height: '40dp'
            pos_hint: {"center_x": 0.5}
            background_color: 0.8, 0.2, 0.2, 1  # Red color for exit
            on_release: app.stop()
